name: workflow-call

on:
  push:
    branches: [ "testing" ]
  pull_request:
    branches: [ "testing" ]
  workflow_dispatch: 
    
jobs:

  job1:
    runs-on: ubuntu-latest    

    steps:
      - name: Set color
        id: set-color-var
        run: echo "vapps=[{'vapp_id': 'loadtest-0', 'ip_address': '149.212.205.9'}, {'vapp_id': 'loadtest-1', 'ip_address': '149.212.205.11'}]" >> "$GITHUB_OUTPUT"
    outputs:
      vapps: ${{ steps.set-color-var.outputs.vapps }}        
                
  get-color:
    runs-on: windows-latest
    needs: job1
   # strategy:
    # matrix:
       # host: '${{fromJSON(needs.job1.outputs.vapps)}}'
    steps:
      - name: power & sleep
        run: echo "power & sleep ${{ needs.job1.outputs.vapps }}"
      
 
