name: test-call

on:
  push:
    branches: [ "testing" ]
  pull_request:
    branches: [ "testing" ]
  workflow_dispatch: 
    
jobs:

  job1:
    runs-on: windows-latest    

    steps:
      - name: Set color
        env:
         test: '[192.168.0.1,192.168.0.2]'
        id: set-color-var
        run: echo "vapps=${{ github.workspace }}\DownloadScript.ps1" >> "$GITHUB_OUTPUT"       
         
    outputs:
      vapps: ${{ steps.set-color-var.outputs.vapps }} 
                
  get-color:
    runs-on: ubuntu-latest
    needs: job1
    strategy:
     matrix:
      host: ${{ fromJson(needs.job1.outputs.vapps) }}
  
    steps:
      - name: power & sleep
        run: echo ${{ matrix.host }}
 
